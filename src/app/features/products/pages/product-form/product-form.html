<div class="form-container">
  <div class="form-card">
    <h1 class="form-title">Formulario de Registro</h1>

    @if (error()) {
      <div class="alert alert-error" role="alert">
        <span class="alert-icon">⚠️</span>
        {{ error() }}
      </div>
    }

    @if (mensajeExito()) {
      <div class="alert alert-success" role="alert">
        <span class="alert-icon">✓</span>
        {{ mensajeExito() }}
      </div>
    }

    <form [formGroup]="formulario" (ngSubmit)="alEnviar()" class="product-form">
      <div class="form-grid">
        <div class="form-group">
          <label for="id" class="form-label">ID</label>
          <input
            type="text"
            id="id"
            formControlName="id"
            class="form-input"
            [class.form-input--error]="tieneError('id')"
            placeholder="Ingrese el ID del producto"
          />
          @if (tieneError('id')) {
            <span class="form-error">{{ obtenerMensajeError('id') }}</span>
          }
        </div>

        <div class="form-group">
          <label for="name" class="form-label">Nombre</label>
          <input
            type="text"
            id="name"
            formControlName="name"
            class="form-input"
            [class.form-input--error]="tieneError('name')"
            placeholder="Ej: Tarjeta Crédito"
          />
          @if (tieneError('name')) {
            <span class="form-error">{{ obtenerMensajeError('name') }}</span>
          }
        </div>

        <div class="form-group form-group--full">
          <label for="description" class="form-label">Descripción</label>
          <textarea
            id="description"
            formControlName="description"
            class="form-input form-textarea"
            [class.form-input--error]="tieneError('description')"
            placeholder="Describa el producto financiero"
            rows="3"
          ></textarea>
          @if (tieneError('description')) {
            <span class="form-error">{{ obtenerMensajeError('description') }}</span>
          }
        </div>

        <div class="form-group form-group--full">
          <label for="logo" class="form-label">Logo</label>
          <input
            type="url"
            id="logo"
            formControlName="logo"
            class="form-input"
            [class.form-input--error]="tieneError('logo')"
            placeholder="https://ejemplo.com/logo.png"
          />
          @if (tieneError('logo')) {
            <span class="form-error">{{ obtenerMensajeError('logo') }}</span>
          }
        </div>

        <div class="form-group">
          <label for="date_release" class="form-label">Fecha Liberación</label>
          <input
            type="date"
            id="date_release"
            formControlName="date_release"
            class="form-input"
            [class.form-input--error]="tieneError('date_release')"
          />
          @if (tieneError('date_release')) {
            <span class="form-error">{{ obtenerMensajeError('date_release') }}</span>
          }
        </div>

        <div class="form-group">
          <label for="date_revision" class="form-label">Fecha Revisión</label>
          <input
            type="date"
            id="date_revision"
            formControlName="date_revision"
            class="form-input form-input--disabled"
            readonly
          />
          <span class="form-hint">Se calcula automáticamente (1 año después)</span>
        </div>
      </div>

      <div class="form-actions">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="alReiniciar()"
          [disabled]="estaEnviando()"
        >
          Reiniciar
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="estaEnviando()">
          @if (estaEnviando()) {
            Guardando...
          } @else {
            Enviar
          }
        </button>
      </div>
    </form>
  </div>
</div>
